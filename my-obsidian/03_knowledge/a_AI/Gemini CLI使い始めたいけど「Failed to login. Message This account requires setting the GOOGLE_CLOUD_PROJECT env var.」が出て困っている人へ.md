
## Gemini CLI セットアップエラー解決手順まとめ

本記事は私が解決するまで並走してくれたGeminiがそのまま作成した記事になります。  
多少私の手直しと、感想が入っています

Gemini CLIの初期設定時に発生する一般的な認証エラーとその解決手順を2ステップで解説します。

---

## Step 1: プロジェクトID未設定エラーの解決

### 状況

`gemini`コマンドを初めて実行した際に、Googleアカウントでログインした後、ターミナルに以下のようなエラーが表示される。

> Failed to login. Message: This account requires setting the GOOGLE_CLOUD_PROJECT env var.see URL

### 原因

Gemini CLIが、どのGoogle Cloudプロジェクトを使用すればよいか分かっていないため。

### 解決手順

1. **プロジェクトIDを確認する**
    
    - [Google Cloud コンソール](https://console.cloud.google.com/)にアクセスします
    - 画面上部に表示されているプロジェクト名とIDの中から、**ID**をコピーします  
        （例: `my-gemini-project-123456`）  
        　
2. **環境変数を設定する**
    
    - ターミナルを開き、以下のコマンドを実行します。
    - `YOUR_PROJECT_ID_HERE` の部分を、先ほどコピーしたご自身のプロジェクトIDに置き換えてください。
        
        ```
        echo 'export GOOGLE_CLOUD_PROJECT="YOUR_PROJECT_ID_HERE"' >> ~/.zshrc
        ```
        
3. **設定を反映させる**
    
    - 以下のコマンドを実行して、現在のターミナルに設定を読み込ませます。
        
        ```
        source ~/.zshrc
        ```
        

---

## Step 2: API無効化エラーの解決

### 状況

プロジェクトID設定後、再度`gemini`コマンドを実行すると、以下のようなエラーが表示される。

> API Error: ... "PERMISSION_DENIED" ... "Gemini for Google Cloud API has not been used in project ... or it is disabled."

### 原因

プロジェクト内で、Geminiが利用するAPIがまだ有効になっていないため。

### 解決手順

1. **API有効化ページにアクセスする**
    - エラーメッセージの中に表示されている、あなたのプロジェクト専用のURL（`https://console.developers.google.com/...`）にアクセスします。  
        　
2. **APIを有効にする**
    - 表示されたページにある、青色の「**有効にする** (Enable)」ボタンをクリックします。  
        　
3. **数分待つ**
    - APIの有効化がシステム全体に反映されるまで、2〜3分ほど待機します。（私はすぐ反映されました）  
        　
4. **再度実行する**
    - ターミナルに戻り、改めて`gemini`コマンドを実行します。これでエラーが解消され、正常に利用できる状態になります。

**補足:**  
手順2でAPIを有効にできない場合は、プロジェクトに請求先アカウント（Billing Account）が正しくリンクされているか確認してください。

**私からの補足:**  
上記全てを満たしてもダメな場合は以下の二つも有効化してみてください。  
色々試す中で有効化したものになるので、それが影響しているかもしれないためです。（曖昧な情報ですみません。）

## まとめ（手書き）

という流れで無事使うことが出来るようになりました。

Issueみたりと頑張った結果、AIに投げたら最速で解決したという悲しい一件でした。

エラーメッセージに対応しようにもGoogle Cloud周りの知識が無さすぎて何を言っているかわからなかったので、その辺の知識があるGemini君がエラーメッセージの通りに愚直に対応したらすぐ解決しました。